<!DOCTYPE html>

<html>
<head>
  <title>fileUtil</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="fileutil">fileUtil</h1>
<p>Functions that access the filesystem go here</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>path = <span class="hljs-built_in">require</span> <span class="hljs-string">'path'</span>
Finder = <span class="hljs-built_in">require</span> <span class="hljs-string">'fs-finder'</span>
_ = <span class="hljs-built_in">require</span> <span class="hljs-string">"lodash"</span>
fs = <span class="hljs-built_in">require</span> <span class="hljs-string">'fs-extra'</span>

fileUtil =
  <span class="hljs-attribute">findFilesWithSuffix</span>: <span class="hljs-function"><span class="hljs-params">(directory, suffix)</span> -&gt;</span>
    files = Finder.from(directory).findFiles <span class="hljs-string">"*<span class="hljs-subst">#{suffix}</span>"</span>
    files.map _.partial(path.relative, directory)</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="fileexists-">fileExists -&gt;</h2>
<p>This function will return true if a file exists at the location
Otherwise will return false</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-attribute">fileExists</span>: <span class="hljs-function"><span class="hljs-params">(baseDir, relPath)</span> -&gt;</span>
    <span class="hljs-keyword">try</span>
      fs.lstatSync(path.join baseDir, relPath).isFile()
    <span class="hljs-keyword">catch</span> e
      <span class="hljs-literal">false</span>

  <span class="hljs-attribute">dirExists</span>: <span class="hljs-function"><span class="hljs-params">(baseDir, relPath)</span> -&gt;</span>
    <span class="hljs-keyword">try</span>
      fs.lstatSync(path.join baseDir, relPath).isDirectory()
    <span class="hljs-keyword">catch</span> e
      <span class="hljs-literal">false</span>
      
  <span class="hljs-attribute">pairSourceFiles</span>: <span class="hljs-function"><span class="hljs-params">(srcDir, srcSuffix, docSuffix, docFiles)</span> -&gt;</span>
    docFiles.reduce<span class="hljs-function"><span class="hljs-params">(((acc, docFile)-&gt;
      docFilePair = {}
      srcFile = fileUtil.swapSuffixes(docSuffix,  srcSuffix, docFile)
      <span class="hljs-keyword">if</span> fileUtil.fileExists(srcDir, srcFile)
        docFilePair.srcFile = srcFile
      acc[docFile] = docFilePair
      acc
    ), {})</span>


</span></pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2 id="swapsuffixes-">swapSuffixes -&gt;</h2>
<h3 id="params-">params:</h3>
<ul>
<li>oldSuffix - String</li>
<li>newSuffix - String</li>
<li>fileName - String</li>
</ul>
<p><code> </code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  
  <span class="hljs-attribute">swapSuffixes</span>: <span class="hljs-function"><span class="hljs-params">(oldSuffix, newSuffix, fileName)</span> -&gt;</span>
    fileName.substring(<span class="hljs-number">0</span>, fileName.length - oldSuffix.length) + newSuffix

  <span class="hljs-attribute">swapSuffixAndCopy</span>: <span class="hljs-function"><span class="hljs-params">(oldSuffix, newSuffix, oldDir, newDir, fileName)</span> -&gt;</span>
    newFileName = fileUtil.swapSuffixes(oldSuffix, newSuffix, fileName)
    newFilePath = path.join newDir, newFileName
    oldFilePath = path.join oldDir, fileName
    fs.copySync oldFilePath, newFilePath

  <span class="hljs-attribute">copyFile</span>: <span class="hljs-function"><span class="hljs-params">(fromBaseDir, fromFile, toBaseDir, toFile)</span> -&gt;</span>
    toFile ?= fromFile
    fs.copySync(path.join(fromBaseDir, fromFile),
      path.join(toBaseDir, toFile))


  <span class="hljs-attribute">getFileLines</span>: <span class="hljs-function"><span class="hljs-params">(baseDir, relPath)</span> -&gt;</span>
    fs.readFileSync(path.join(baseDir, relPath)).toString().split(<span class="hljs-string">'\n'</span>)

  <span class="hljs-attribute">cleanDirectory</span>: <span class="hljs-function"><span class="hljs-params">(dir)</span> -&gt;</span>
    fs.removeSync dir
    fs.mkdirsSync dir

  <span class="hljs-attribute">saveFile</span>: <span class="hljs-function"><span class="hljs-params">(baseDir, relPath, contents)</span> -&gt;</span>
    fs.outputFileSync path.join(baseDir, relPath), contents

  <span class="hljs-attribute">readJson</span>: <span class="hljs-function"><span class="hljs-params">(file)</span> -&gt;</span>
    fs.readJsonSync(file)

<span class="hljs-built_in">exports</span>.fileUtil = fileUtil</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
